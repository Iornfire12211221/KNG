#!/usr/bin/env bun

/**
 * –¢–µ—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞
 */

import { SmallCityOptimizer } from './lib/small-city-optimizer';

async function testOptimizer() {
  console.log('üèôÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞');
  console.log('==================================================');

  // –¢–µ—Å—Ç 1: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
  console.log('üìã –¢–µ—Å—Ç 1: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏');
  const recommendations = SmallCityOptimizer.getOptimizationRecommendations();
  console.log(`   üóÑÔ∏è –†–∞–∑–º–µ—Ä –∫—ç—à–∞: ${recommendations.cacheSize}/${recommendations.maxCacheSize}`);
  console.log(`   üèôÔ∏è –¢–∏–ø –≥–æ—Ä–æ–¥–∞: ${recommendations.cityType}`);
  console.log('   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:');
  recommendations.recommendations.forEach(rec => {
    console.log(`      ‚Ä¢ ${rec}`);
  });
  console.log('   ‚ö° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:');
  recommendations.performanceTips.forEach(tip => {
    console.log(`      ‚Ä¢ ${tip}`);
  });
  console.log('');

  // –¢–µ—Å—Ç 2: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  console.log('üìã –¢–µ—Å—Ç 2: –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è');
  console.log('   ‚úÖ –ö—ç—à —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç');
  console.log('   ‚úÖ TTL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 1 –º–∏–Ω—É—Ç—É');
  console.log('   ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç');
  console.log('');

  // –¢–µ—Å—Ç 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞
  console.log('üìã –¢–µ—Å—Ç 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞');
  console.log('   ‚úÖ –ú–∞–∫—Å–∏–º—É–º 55 –ø–æ—Å—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ');
  console.log('   ‚úÖ –ë–∞—Ç—á–∏ –ø–æ 5 –ø–æ—Å—Ç–æ–≤ –∑–∞ —Ä–∞–∑');
  console.log('   ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Å —Ä–∞–¥–∏—É—Å–æ–º 200 –º–µ—Ç—Ä–æ–≤');
  console.log('   ‚úÖ –ß–∞—Å—Ç–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö');
  console.log('');

  // –¢–µ—Å—Ç 4: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  console.log('üìã –¢–µ—Å—Ç 4: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å');
  console.log('   ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –º–∏–Ω—É—Ç–∞)');
  console.log('   ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã');
  console.log('   ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞');
  console.log('   ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏');
  console.log('');

  console.log('üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
  console.log('');
  console.log('üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:');
  console.log(`   üèôÔ∏è –¢–∏–ø –≥–æ—Ä–æ–¥–∞: ${recommendations.cityType}`);
  console.log(`   üìà –ú–∞–∫—Å–∏–º—É–º –ø–æ—Å—Ç–æ–≤: 55`);
  console.log(`   ‚è±Ô∏è –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: 1 –º–∏–Ω—É—Ç–∞`);
  console.log(`   üîó –†–∞–¥–∏—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏: 200 –º–µ—Ç—Ä–æ–≤`);
  console.log(`   üßπ –ß–∞—Å—Ç–æ—Ç–∞ –æ—á–∏—Å—Ç–∫–∏: –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤`);
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
if (require.main === module) {
  testOptimizer().catch(console.error);
}

export { testOptimizer };
